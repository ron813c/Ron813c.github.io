<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braiins Pool Control Panel - Enhanced</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
    <header>
        <h1>⛏️ Braiins Pool Dashboard</h1>
        <p>Your centralized control panel for mining operations.</p>
    </header>

    <main id="control-panel">
        
        <section id="connection-info" class="card">
            <h2>🔗 Current Connection Status</h2>
            <p>Protocol: **Stratum V2 (TCP)**</p>
            <p>Address: <span id="pool-address" class="data-display">stratum+tcp://stratum.braiins.com:3333</span></p>
            <p>Worker ID: <span id="worker-id" class="data-display">ron47ron1.mining_btc</span></p>
            <button id="open-config-modal" class="action-button">⚙️ Edit Pool Settings</button>
        </section>

        <section id="live-metrics" class="card">
            <h2>📈 Live Mining Metrics</h2>
            
            <div class="metrics-grid">
                <div class="metric-item">
                    <h3>Hashrate (Current)</h3>
                    <span id="current-hashrate" class="metric-value">0.00 TH/s</span>
                </div>
                <div class="metric-item">
                    <h3>Shares Accepted</h3>
                    <span id="shares-accepted" class="metric-value">0</span>
                </div>
                <div class="metric-item">
                    <h3>Fan Speed</h3>
                    <span id="fan-speed" class="metric-value">0 RPM</span>
                </div>
                <div class="metric-item">
                    <h3>Power Draw</h3>
                    <span id="power-draw" class="metric-value">0 W</span>
                </div>
            </div>
            
            <button id="open-metrics-modal" class="action-button secondary">📊 View Detailed Metrics</button>
            <button id="refresh-metrics" class="action-button secondary">🔄 Refresh Data</button>
        </section>

        <section id="stratum-upgrade-status" class="card">
            <h2>🚀 Stratum V2 Upgrade</h2>
            <p>New Pool Address (V2): <span id="new-pool-address" class="data-display">stratum2+tcp://v2.stratum.braiins.com/...</span></p>
            <div id="upgrade-actions">
                <button id="upgrade-button" class="action-button primary">⚡ Upgrade to Stratum V2</button>
                <p class="status-message" id="v2-status">Status: **Ready for Upgrade**</p>
            </div>
        </section>

    </main>
    
    <div id="modals">
        
        <div id="miningMetricsModal" class="modal hidden">
            <div class="modal-content">
                <span class="close-modal-metrics">&times;</span>
                <h2>Detailed Mining Metrics **(Viewing Window)**</h2>
                <p>Hashrate (24h Avg): <span id="hashrate-24h">0.00 TH/s</span></p>
                <p>Rejected Shares: <span id="shares-rejected">0</span></p>
                <p>Temperature (Chip): <span id="chip-temp">0 °C</span></p>
                <button id="export-metrics" class="action-button">📤 Export Data (CSV)</button>
            </div>
        </div>

        <div id="poolConfigModal" class="modal hidden">
            <div class="modal-content">
                <span class="close-modal-config">&times;</span>
                <h2>Edit Pool Settings **(Push Button Action)**</h2>
                <label for="new-pool-input">New Pool Address:</label>
                <input type="text" id="new-pool-input" placeholder="Enter new pool address">
                <label for="new-worker-input">New Worker ID:</label>
                <input type="text" id="new-worker-input" placeholder="Enter new worker ID">
                <button id="save-settings" class="action-button primary">💾 Save Settings</button>
                <button id="cancel-settings" class="action-button secondary">✖️ Cancel</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script> 
</body>
</html>
